<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Cheer Bat Web</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="app">
    <header class="topbar">
      <div class="topbar-left">
        <div class="brand-dot" aria-hidden="true"></div>
        <div class="brand-text">Cheer Bat</div>
      </div>
      <div class="topbar-right">
        <div id="connPill" class="pill pill-muted">未接続</div>
      </div>
    </header>

    <main class="main">
      <section id="viewConnect" class="view">
        <div class="card">
          <div class="card-title">応援バットをつなぐ</div>
          <div id="bluetoothSupport" class="note note-warn" hidden>
            このブラウザではBluetooth接続ができません。Bluefyで開いてください。
          </div>

          <div class="row">
            <div class="label">状態</div>
            <div id="connState" class="value">未接続</div>
          </div>

          <div class="row">
            <div class="label">デバイス</div>
            <div id="deviceName" class="value value-muted">未選択</div>
          </div>

          <div class="btn-row">
            <button id="btnScan" class="btn btn-primary">さがす</button>
            <button id="btnConnect" class="btn btn-secondary" disabled>つなぐ</button>
          </div>

          <button id="btnStart" class="btn btn-cta" disabled>応援をはじめる</button>

          <div class="divider"></div>

          <button id="btnDemo" class="btn btn-ghost">デモで試す</button>
          <div class="note">
            ヒント：バットの電源を入れて、近くに置いてから「さがす」を押してください。
          </div>
        </div>
      </section>

      <section id="viewCheer" class="view" hidden>
        <div class="cheer-wrap">
          <div class="cheer-header">
            <div class="cheer-date" id="todayLabel">きょう</div>
            <button id="btnParent" class="parent-chip" aria-label="おとなモード">おとな</button>
          </div>

          <div class="hit-card">
            <div class="hit-title">きょうの回数</div>
            <div class="hit-count"><span id="hitCount">0</span><span class="hit-suffix">回</span></div>
          </div>

          <div class="flame-card">
            <div class="flame-stage">
              <div id="flame" class="flame flame-lv0" aria-hidden="true">
                <div class="flame-core"></div>
                <div class="flame-glow"></div>
              </div>
            </div>
            <div class="heat-label">いまの熱さ</div>
            <div class="heat-dots" aria-hidden="true">
              <div class="dot" id="dot1"></div>
              <div class="dot" id="dot2"></div>
              <div class="dot" id="dot3"></div>
              <div class="dot" id="dot4"></div>
              <div class="dot" id="dot5"></div>
            </div>
            <div id="pauseBanner" class="pause-banner" hidden>休憩中</div>
          </div>

          <div class="bat-card">
            <div class="bat-wrap" aria-hidden="true">
              <div class="bat-body"></div>
              <div class="bat-tip" id="batTip"></div>
            </div>
            <div class="bat-label">先っぽ：<span id="equippedName">なし</span></div>
          </div>

          <div id="toast" class="toast" hidden></div>
        </div>
      </section>

      <section id="overlay" class="overlay" hidden>
        <div class="overlay-sheet">
          <div class="overlay-top">
            <div class="overlay-title">おとなモード</div>
            <button id="btnCloseOverlay" class="icon-btn" aria-label="とじる">とじる</button>
          </div>

          <div class="tabs">
            <button class="tab" id="tabHome" data-tab="home">ホーム</button>
            <button class="tab" id="tabMissions" data-tab="missions">ミッション</button>
            <button class="tab" id="tabGacha" data-tab="gacha">ガチャ</button>
            <button class="tab" id="tabCollection" data-tab="collection">コレクション</button>
          </div>

          <div class="overlay-content">
            <section id="panelHome" class="panel">
              <div class="card">
                <div class="card-title">状態</div>
                <div class="row">
                  <div class="label">接続</div>
                  <div id="panelConn" class="value">未接続</div>
                </div>
                <div class="row">
                  <div class="label">合計</div>
                  <div id="panelTotal" class="value">0回</div>
                </div>
                <div class="row">
                  <div class="label">直近30秒</div>
                  <div id="panelWindow" class="value">0回</div>
                </div>
                <div class="row">
                  <div class="label">熱さ</div>
                  <div id="panelLevel" class="value">Lv0</div>
                </div>
                <div class="row">
                  <div class="label">最終通知</div>
                  <div id="panelLastTap" class="value value-muted">なし</div>
                </div>

                <div class="btn-row">
                  <button id="btnPause" class="btn btn-secondary">いったん止める</button>
                  <button id="btnEnd" class="btn btn-ghost">おわる</button>
                </div>

                <div class="btn-row">
                  <button id="btnReconnect" class="btn btn-primary">つなぎ直す</button>
                  <button id="btnDisconnect" class="btn btn-ghost">きりはなす</button>
                </div>
              </div>

              <div class="card">
                <div class="card-title">イベント送信（球場用）</div>
                <div class="note">
                  ここからバットへ振動指示を送れます。点は現状ふるえない設定の場合があります。
                </div>
                <div class="btn-row">
                  <button id="btnEvtPoint" class="btn btn-secondary">点</button>
                  <button id="btnEvtChance" class="btn btn-secondary">チャンス</button>
                  <button id="btnEvtPinch" class="btn btn-secondary">ピンチ</button>
                </div>
                <div class="btn-row">
                  <button id="btnEvtStop" class="btn btn-ghost">停止</button>
                </div>
                <div class="row">
                  <div class="label">強さ（保存のみ）</div>
                  <div class="value"><input id="strength" type="range" min="0" max="100" value="50" /></div>
                </div>
              </div>

              <div class="card">
                <div class="card-title">設定</div>
                <div class="row">
                  <div class="label">かんど（保存のみ）</div>
                  <div class="value"><input id="sens" type="range" min="0" max="100" value="50" /></div>
                </div>
                <div class="row">
                  <div class="label">しんどう（保存のみ）</div>
                  <div class="value"><input id="vibe" type="range" min="0" max="100" value="50" /></div>
                </div>
              </div>
            </section>

            <section id="panelMissions" class="panel" hidden>
              <div class="card">
                <div class="card-title">チケット</div>
                <div class="ticket-big"><span id="ticketCount">0</span>枚</div>
              </div>

              <div id="firstBonusCard" class="card">
                <div class="card-title">はじめてボーナス</div>
                <div class="note">デモ用。1回だけ受け取れます。</div>
                <div class="row">
                  <div class="label">報酬</div>
                  <div class="value">チケット10</div>
                </div>
                <button id="btnClaimFirst" class="btn btn-primary">うけとる</button>
              </div>

              <div class="card">
                <div class="card-title">きょうのミッション</div>
                <div id="missionsList" class="list"></div>
              </div>
            </section>

            <section id="panelGacha" class="panel" hidden>
              <div class="card">
                <div class="card-title">チケット</div>
                <div class="ticket-big"><span id="ticketCount2">0</span>枚</div>
                <button id="btnRoll" class="btn btn-primary">1回ひく（1枚）</button>
                <div class="note">ハズレ無し。かぶったらキラ粉になります。</div>
              </div>

              <div id="gachaResult" class="card" hidden>
                <div class="card-title">でた！</div>
                <div id="resultVisual" class="result-visual" aria-hidden="true"></div>
                <div id="resultName" class="result-name"></div>
                <div class="btn-row">
                  <button id="btnEquipResult" class="btn btn-secondary">つける</button>
                  <button id="btnCloseResult" class="btn btn-ghost">とじる</button>
                </div>
              </div>

              <div class="card">
                <div class="card-title">キラ粉</div>
                <div class="ticket-big"><span id="glitterCount">0</span></div>
                <div class="note">かぶった時に増えます。色替え解放に使います。</div>
              </div>
            </section>

            <section id="panelCollection" class="panel" hidden>
              <div class="card">
                <div class="card-title">装着中</div>
                <div class="row">
                  <div class="label">先っぽ</div>
                  <div id="equippedNow" class="value">なし</div>
                </div>
              </div>

              <div class="card">
                <div class="card-title">先っぽ一覧</div>
                <div id="itemsGrid" class="grid"></div>
              </div>

              <div class="card">
                <div class="card-title">現物化候補</div>
                <div id="wishlist" class="list"></div>
                <button id="btnGoReal" class="btn btn-ghost">現物化（プロト）</button>
              </div>
            </section>

            <section id="panelReal" class="panel" hidden>
              <div class="card">
                <div class="card-title">現物化（プロト）</div>
                <div class="note">ここは将来の注文画面につながる予定です。</div>
                <div id="realList" class="list"></div>
                <button id="btnRealGate" class="btn btn-primary">2秒長押しでつぎへ</button>
                <div id="realNext" class="note note-warn" hidden>注文画面（プロト）：ここから先はこれから作るよ</div>
                <button id="btnBackFromReal" class="btn btn-ghost">もどる</button>
              </div>
            </section>

          </div>
        </div>
      </section>

    </main>

    <footer class="footer">
      <div class="footer-text">Bluefyでの使用を想定。Bluetooth接続はボタン操作から開始してください。</div>
    </footer>
  </div>

  <script src="app.js"></script>
</body>
</html>
